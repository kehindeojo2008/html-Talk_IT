<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Neon Tic-Tac-Toe</title>
    <style>
      body {
        background: #111;
        color: white;
        font-family: "Segoe UI", sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
        overflow: hidden; /* Prevents bounce on mobile */
      }
      h1 { margin-bottom: 10px; font-size: 2rem; text-transform: uppercase; letter-spacing: 3px; }
      .status { margin-bottom: 20px; font-size: 1.2rem; color: #888; font-weight: bold; height: 30px; }

      .board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
        gap: 10px;
        width: 90vw;
        max-width: 320px;
        aspect-ratio: 1 / 1;
      }

      .cell {
        background: #222;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        cursor: pointer;
        border-radius: 10px;
        transition: 0.3s;
        -webkit-tap-highlight-color: transparent;
      }
      .cell:hover { background: #2a2a2a; }

      .x { color: #ff0055; text-shadow: 0 0 15px #ff0055; }
      .o { color: #00aaff; text-shadow: 0 0 15px #00aaff; }

      button {
        margin-top: 30px;
        padding: 12px 24px;
        background: transparent;
        color: white;
        border: 2px solid white;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.3s;
      }
      button:hover { background: white; color: black; }
    </style>
  </head>
  <body>
    <h1>Tic-Tac-Toe</h1>
    <div class="status" id="status">Your Turn (X)</div>

    <div class="board" id="board"></div>

    <button onclick="resetGame()">Reset Game</button>

    <script>
      const boardEl = document.getElementById("board");
      const statusEl = document.getElementById("status");
      let gameState = ["", "", "", "", "", "", "", "", ""];
      let currentPlayer = "X"; // Human is always X
      let gameActive = true;

      const winningConditions = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
      ];

      function createBoard() {
        boardEl.innerHTML = "";
        gameState.forEach((cell, index) => {
          const cellEl = document.createElement("div");
          cellEl.classList.add("cell");
          cellEl.setAttribute("data-index", index);
          cellEl.addEventListener("click", handleCellClick);
          boardEl.appendChild(cellEl);
        });
      }

      function handleCellClick(e) {
        const index = parseInt(e.target.getAttribute("data-index"));

        if (gameState[index] !== "" || !gameActive || currentPlayer === "O") return;

        makeMove(index, "X");

        if (gameActive) {
          statusEl.innerText = "Computer is thinking...";
          setTimeout(computerMove, 600); // Small delay for "thinking" feel
        }
      }

      function makeMove(index, player) {
        gameState[index] = player;
        const cell = document.querySelector(`[data-index='${index}']`);
        cell.innerText = player;
        cell.classList.add(player.toLowerCase());
        checkResult();
      }

      function computerMove() {
        if (!gameActive) return;

        // The Computer (O) uses Minimax to find the best move
        let bestScore = -Infinity;
        let move;
        for (let i = 0; i < 9; i++) {
          if (gameState[i] === "") {
            gameState[i] = "O";
            let score = minimax(gameState, 0, false);
            gameState[i] = "";
            if (score > bestScore) {
              bestScore = score;
              move = i;
            }
          }
        }
        makeMove(move, "O");
        if (gameActive) statusEl.innerText = "Your Turn (X)";
      }

      // Minimax Algorithm Logic
      function minimax(board, depth, isMaximizing) {
        let result = evaluateWinner();
        if (result !== null) {
          return result === "O" ? 10 - depth : result === "X" ? depth - 10 : 0;
        }

        if (isMaximizing) {
          let bestScore = -Infinity;
          for (let i = 0; i < 9; i++) {
            if (board[i] === "") {
              board[i] = "O";
              let score = minimax(board, depth + 1, false);
              board[i] = "";
              bestScore = Math.max(score, bestScore);
            }
          }
          return bestScore;
        } else {
          let bestScore = Infinity;
          for (let i = 0; i < 9; i++) {
            if (board[i] === "") {
              board[i] = "X";
              let score = minimax(board, depth + 1, true);
              board[i] = "";
              bestScore = Math.min(score, bestScore);
            }
          }
          return bestScore;
        }
      }

      function evaluateWinner() {
        for (let condition of winningConditions) {
          const [a, b, c] = condition;
          if (gameState[a] && gameState[a] === gameState[b] && gameState[a] === gameState[c]) {
            return gameState[a];
          }
        }
        return gameState.includes("") ? null : "tie";
      }

      function checkResult() {
        let winner = evaluateWinner();

        if (winner) {
          gameActive = false;
          if (winner === "tie") {
            statusEl.innerText = "It's a Draw!";
            statusEl.style.color = "white";
          } else {
            statusEl.innerText = `Player ${winner} Wins!`;
            statusEl.style.color = winner === "X" ? "#ff0055" : "#00aaff";
          }
        }
      }

      function resetGame() {
        gameState = ["", "", "", "", "", "", "", "", ""];
        gameActive = true;
        currentPlayer = "X";
        statusEl.innerText = "Your Turn (X)";
        statusEl.style.color = "#888";
        createBoard();
      }

      createBoard();
    </script>
  </body>
</html>